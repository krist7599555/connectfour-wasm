{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "app.svelte"
  ],
  "sourcesContent": [
    "<div id='app' class='flex flex-col justify-center items-center h-screen'>\n  winner = {winner}\n  <div class=\"app-board\">\n    {#each board as row, i}\n    <div class=\"app-stack\">\n        {#each row as itm, j}\n          <div class={`player-${itm}`} on:click={() => winner === 0 && push(i, current_player)}>\n            \n          </div>\n        {/each}\n      </div>\n    {/each}\n  </div>\n  <div class=\"w-80vmin mt-2 w-full flex justify-between\">\n    <div id='app-current-player' class={`player-1 px-4 py-2 rounded border text-white player-${current_player}`}>\n      current player\n    </div>\n    <div>\n      <button id='undo' on:click={() => undo()} class=\"px-4 py-2 rounded border\">undo</button>\n      <button id='ai-1' on:click={() => ai1 = !ai1} class=\"px-4 py-2 rounded border\" class:player-1={ai1}>AI 1</button>\n      <button id='ai-2' on:click={() => ai2 = !ai2} class=\"px-4 py-2 rounded border\" class:player-2={ai2}>AI 2</button>\n    </div>\n  </div>\n</div>\n\n<script lang='ts'>var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { wait_wasm, solve, winner as wasm_winner } from './rust';\nimport indexOf from 'lodash/indexOf';\nimport flatten from 'lodash/flatten';\nimport isEmpty from 'lodash/isEmpty';\nconst empty = 0;\nlet ai1 = false;\nlet ai2 = false;\nlet lock = false;\nlet current_player = 1;\n$: if (!lock && current_player == 1 && ai1) {\n    ai(current_player);\n}\n$: if (!lock && current_player == 2 && ai2) {\n    ai(current_player);\n}\nconst history = [];\nlet board = [\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n];\n$: winner = 0;\nfunction check_winner() {\n    winner = wasm_winner(flatten(board));\n}\nfunction push(row, turn) {\n    if (winner !== 0)\n        return false;\n    if (!turn)\n        turn = current_player;\n    const col = indexOf(board[row], empty);\n    if (col == -1)\n        return false;\n    board[row][col] = turn;\n    history.push({ row, col, turn });\n    toggle_current_player();\n    check_winner();\n    return true;\n}\nfunction pop() {\n    if (isEmpty(history))\n        return false;\n    const { row, col, turn } = history.pop();\n    board[row][col] = empty;\n    toggle_current_player();\n    check_winner();\n    return true;\n}\nfunction toggle_current_player() {\n    current_player ^= 3;\n    return current_player;\n}\n// appStacksEl.on('click', function () {\n//   const idx = jquery(this).index();\n//   push(idx)\n// })\nfunction undo() {\n    pop();\n}\nfunction ai(player) {\n    return __awaiter(this, void 0, void 0, function* () {\n        lock = true;\n        yield wait_wasm;\n        setTimeout(() => {\n            console.log(board);\n            const idx = solve(flatten(board), player);\n            console.log([\"solve\", idx]);\n            push(idx);\n            lock = false;\n        }, 0);\n    });\n}\n</script>\n\n<style lang='scss'>.w-80vmin {\n  width: 80vmin;\n}\n\n.app-board {\n  height: 80vmin;\n  width: 80vmin;\n  background-color: beige;\n  padding: 1rem;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n}\n\n.app-stack {\n  width: 14.28%;\n  height: 100%;\n  cursor: pointer;\n  display: flex;\n  flex-direction: column-reverse;\n  justify-content: flex-start;\n}\n\n.app-stack:hover {\n  background-color: #d6d6d0;\n}\n\n.app-stack > * {\n  height: 14.28%;\n  background: rgba(110, 110, 110, 0.192);\n  border-radius: 8px;\n  transform: scale(0.98);\n}\n\n.player-1 {\n  background: #d1203d !important;\n}\n\n.player-2 {\n  background: #2727c7 !important;\n}\n\n#ai.loading {\n  opacity: 0.5;\n  background-color: #eeeeee;\n}</style>"
  ],
  "names": [],
  "mappings": "AAgHmB,SAAS,4BAAC,CAAC,AAC5B,KAAK,CAAE,MAAM,AACf,CAAC,AAED,UAAU,4BAAC,CAAC,AACV,MAAM,CAAE,MAAM,CACd,KAAK,CAAE,MAAM,CACb,gBAAgB,CAAE,KAAK,CACvB,OAAO,CAAE,IAAI,CACb,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,QAAQ,AACvB,CAAC,AAED,UAAU,4BAAC,CAAC,AACV,KAAK,CAAE,MAAM,CACb,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,OAAO,CACf,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,cAAc,CAC9B,eAAe,CAAE,UAAU,AAC7B,CAAC,AAED,sCAAU,MAAM,AAAC,CAAC,AAChB,gBAAgB,CAAE,OAAO,AAC3B,CAAC,AAED,wBAAU,CAAG,cAAE,CAAC,AACd,MAAM,CAAE,MAAM,CACd,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CACtC,aAAa,CAAE,GAAG,CAClB,SAAS,CAAE,MAAM,IAAI,CAAC,AACxB,CAAC,AAED,SAAS,4BAAC,CAAC,AACT,UAAU,CAAE,OAAO,CAAC,UAAU,AAChC,CAAC,AAED,SAAS,4BAAC,CAAC,AACT,UAAU,CAAE,OAAO,CAAC,UAAU,AAChC,CAAC"
}